<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Landtagswahl Potsdam - Wahlkreise, straßengenau</title>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="wk.css">

	<script src="streets.js"></script>
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
	<script>
		$(function() {
			var accentMap = {
				"ä": "a",
				"ö": "o",
				"ü": "u",
				"ß": "ss",
			};
			var normalize = function( term ) {
				var ret = "";
				for ( var i = 0; i < term.length; i++ ) {
					ret += accentMap[ term.charAt(i) ] || term.charAt(i);
				}
				return ret;
			};
			var d = $( "#streets" ).autocomplete({
				source: function( request, response ) {
					var matcher = new RegExp( $.ui.autocomplete.escapeRegex( request.term ), "i" );
					response( $.grep( streets, function( value ) {
						value = value.label || value.value || value;
						return matcher.test( value ) || matcher.test( normalize( value ) );
					}) );
				},
			});
			d.data("ui-autocomplete")._renderItem = function( ul, item ) {
				return $( "<li>" )
				.attr( "data-value", item.value )
				.addClass(item.value.match(/WK\ \d\d/)[0].replace(" ","-"))
				.append( $( "<a>" ).text( item.label ) )
				.appendTo( ul );
			};
		});
	</script>
</head>
<body>
	<div class="ui-widget">
		<form>
			<label for="streets">Straße: </label>
			<input id="streets">
		</form>
	</div>
</body>
</html>